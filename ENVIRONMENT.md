# 环境隔离说明

## 概述

本项目支持开发环境和生产环境的完全隔离，确保两个环境的数据互不干扰。

## 环境配置

### 开发环境
- **配置文件**: `docker-compose.dev.yml`
- **启动脚本**: `dev.bat`
- **清理脚本**: `clean-dev.bat`
- **数据卷**: 
  - `yeepay-dev-uploads`: 开发环境上传文件
  - `yeepay-dev-outputs`: 开发环境输出文件
  - `yeepay-dev-database`: 开发环境数据库
- **端口**: 
  - 前端: `localhost:5173` (Vite开发服务器)
  - 后端: `localhost:9000`
- **调试模式**: 启用

### 生产环境
- **配置文件**: `docker-compose.yml`
- **启动脚本**: `prod.bat`
- **清理脚本**: `clean-prod.bat`
- **数据卷**:
  - `yeepay-uploads`: 生产环境上传文件
  - `yeepay-outputs`: 生产环境输出文件
  - `yeepay-database`: 生产环境数据库
- **端口**: `localhost:3000` (nginx统一入口)
- **调试模式**: 禁用

## 使用方法

### 开发环境
```bash
# 启动开发环境
dev.bat

# 清理开发环境数据
clean-dev.bat
```

### 生产环境
```bash
# 启动生产环境
prod.bat

# 清理生产环境数据
clean-prod.bat
```

## 数据隔离

- ✅ **数据库隔离**: 开发和生产环境使用不同的数据库文件
- ✅ **文件隔离**: 上传和输出文件完全分离
- ✅ **网络隔离**: 使用不同的Docker网络
- ✅ **容器隔离**: 不同环境使用不同的容器名称

## 注意事项

1. **数据备份**: 生产环境数据会自动保存在Docker卷中，重启容器数据不会丢失
2. **数据清理**: 使用清理脚本会永久删除对应环境的所有数据
3. **端口冲突**: 确保不同环境使用不同的端口
4. **ComfyUI共享**: 两个环境共享同一个ComfyUI实例，但输出目录不同
